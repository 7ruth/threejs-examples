<DOCTYPE html>
<html>
<head>
<title>glsl</title>
<style>
body{
	padding:0;
	margin:0;
	background:#333;
}
</style>
<script src="../lib/three_r50.min.js"></script>
<script>
window.addEventListener( 'DOMContentLoaded', function(){
	
	var width = window.innerWidth;
	var height = window.innerHeight;
	var renderer, scene, camera, light, mesh;

	var vertexShaderSource = [
		'uniform float time;',
		'void main(void){',
		'	float x = position.x * abs( sin( time / 5.0 ) );',
		'	float y = position.y * abs( sin( time / 4.0 ) );',
		'	float z = position.z * abs( sin( time / 3.0 ) );',
		'   gl_Position = projectionMatrix * modelViewMatrix * vec4( x, y, z, 1.0 );',
		'}'
	].join( '\n' );

	var fragmentShaderSource = [
		'void main(void){',
		'   gl_FragColor = vec4( 1.0, 0, 0, 1.0 );',
		'}'
	].join( '\n' );

	var uniforms = {
		time : {
			type : 'f',
			value : 0.0
		}
	};
	var attributes = {};
	
	init();
	anim();
	
	function init(){
		renderer = new THREE.WebGLRenderer();
		renderer.setSize( width, height );
		document.body.appendChild( renderer.domElement );

		scene = new THREE.Scene();
		
		camera = new THREE.PerspectiveCamera( 40, width / height, 1, 1000 );
		camera.position.set( 200, 200, 200 );
		camera.lookAt( scene.position );
		scene.add( camera );
		
		light = new THREE.DirectionalLight( 0xffffff, 1 );
		light.position.set( -1, 1, 1 );
		scene.add( light );

	    var geometry = new THREE.SphereGeometry( 100, 16, 16 );	
	    var material = new THREE.ShaderMaterial( {
			vertexShader: vertexShaderSource,
			fragmentShader: fragmentShaderSource,
			uniforms : uniforms,
			attributes : attributes,
			wireframe:true
		} );
	    mesh = new THREE.Mesh( geometry, material );
	    scene.add( mesh );
	}
	
	function anim() {
		uniforms.time.value += 0.05;
		renderer.render( scene, camera );
		requestAnimationFrame( anim );
	}
}, false);
</script>
</head>
<body>
</body>
</html>