<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Geometries</title>
<style>
body{
	margin:0;
	padding:0;
	overflow:hidden;
	background:#333;
}
</style>
<script src="../lib/Three_r49.js"></script>
<script src="dat.gui.min.js"></script>
<script>

window.addEventListener("DOMContentLoaded", function(){
	
	var width = window.innerWidth;
	var height = window.innerHeight;
	var materials = {
		//https://github.com/mrdoob/three.js/tree/master/src/materials
		MeshNormalMaterial  : THREE.MeshNormalMaterial,
		MeshBasicMaterial   : THREE.MeshBasicMaterial,
		MeshLambertMaterial : THREE.MeshLambertMaterial,
		MeshPhongMaterial   : THREE.MeshPhongMaterial,
		MeshDepthMaterial   : THREE.MeshDepthMaterial,
		//MeshFaceMaterial    : new THREE.MeshFaceMaterial()
//ParticleBasicMaterial
//ParticleCanvasMaterial
//ParticleDOMMaterial
//ShaderMaterial


	};

	var materialStatus = {
		material : 'MeshNormalMaterial',
		map      : null,
		options  : {
			opacity : 1,
			shading : 1,
			visible : false,
			wireframe : false,
			wireframeLinewidth : 1
		}
	}


	var renderer = new THREE.WebGLRenderer();
	renderer.setSize( width, height );
	document.body.appendChild( renderer.domElement );

	var scene = new THREE.Scene();
	
	var camera = new THREE.PerspectiveCamera( 40, width / height, 1, 1000 );
	camera.lookAt( new THREE.Vector3( 0, 0, 0) );
	scene.add( camera );

	var light = new THREE.PointLight( 0xffffff, 1 );
	light.position.set( 50, 50, 50 );
	scene.add( light );
	
	mesh = new THREE.Mesh(
		new THREE.SphereGeometry( 10, 20, 30 ),
		new THREE.MeshPhongMaterial()
		//new THREE.MeshPhongMaterial({map: THREE.ImageUtils.loadTexture('earth.jpg')})
	);
	scene.add( mesh );
	
	setGUI();
	animate();
	
	function setGUI(){
		var gui = new dat.GUI();
		var arr = [];
		for(var i in materials){
			arr.push(i);
		}
		gui.add( materialStatus, 'material', arr ).onChange(function() {
			setMaterial();
		});
		var options = gui.addFolder('options');
		for( i in materialStatus.options){
			options.add( materialStatus.options, i ).onChange(function() {
				setMaterial();
			});
		}

		options.add( materialStatus, 'map', [null, 'earth.jpg'] ).onChange(function() {
			setMaterial();
		});
		return;
	}

	function setMaterial(){

		var opt = materialStatus.options;
		var params = {};
		
		params.wireframe = opt.wireframe;
		params.map = opt.map === null ? null : THREE.ImageUtils.loadTexture(opt.map)
		
		console.log(params)

		mesh.material = new materials[materialStatus.material](params);

		console.log(mesh.material)

	}
	
	function animate(){
		var timer = Date.now() * 0.1;
		camera.position.x = 60 * Math.sin( timer * Math.PI / 360 );
		camera.position.y = 20 * Math.sin( timer * Math.PI / 360 );
		camera.position.z = 60 * Math.cos( timer * Math.PI / 360 );
		camera.lookAt( new THREE.Vector3( 0, 0, 0) );
		renderer.render( scene, camera );
		requestAnimationFrame(animate);
		return;
	};
	
	return;
}, false);
</script>
</head>
<body>
</body>
</html>
